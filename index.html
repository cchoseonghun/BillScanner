<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>BillScanner</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" integrity="sha512-cyzxRvewl+FOKTtpBzYjW6x6IAYUCZy3sGP40hn+DQkqeluGRCax7qztK2ImL64SA+C7kVWdLI6wvdlStawhyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="./css/index.css" rel="stylesheet" type="text/css"/>
</head>

<body>
  <div class="container mb-3">

    <div class="header mb-3">
      <h2>OCR Helper - BillScanner</h2>
      <a href="https://github.com/cchoseonghun/BillScanner">Github</a>
    </div>

    <div class="content">

      <!-- area-input start -->
      <div id="area-input">
        <div id="area-how" class="row m-0 mb-1">
          <button class="btn btn-outline-dark col" onclick="setCamera()">Camera</button>
          <button class="btn btn-outline-dark col active" onclick="setInput()">Upload</button>
        </div>
        

        <div id="area-reader">
          <div id="area-camera" class="w-100 d-none">
          <!-- <div id="area-camera" class="w-100"> -->
            <video class="w-100"></video>
            <button id="btn-capture" class="btn btn-success w-100" onclick="takePicture()">Capture</button>
          </div> 
          <div id="area-upload" ondrop="handleDrop(event)">
            <p>Drag an image here or <strong>upload a file</strong></p>
            <input type="file" onchange="handleChange(event)" accept="image/*"/>
          </div>
        </div>

      </div>
      <!-- area-input end -->

      <button id="btn-reset" class="btn btn-outline-primary w-100 mb-1 d-none" onclick="reset()">Reset</button>

      <div id="area-cropper" class="w-100 d-none">
        <div><img id="uploaded"></div>
        <button id="btn-crop" class="btn btn-success w-100 mt-1">Crop</button>
      </div>
  
      <!-- area-output start -->
      <div id="area-output" class="d-none">

        <div id="area-result" class="row">
          <section id="area-preview" class="col">
            <h3>Preview</h3>
            <div id="cropped-image">
              <img id="cropped" style="max-width: 100%;" />
            </div>
          </section>
  
          <section id="area-user" class="col">
            <h3></h3>
            <progress class="w-100" value="0" min="0" max="100"></progress>
            <div>
              <textarea></textarea>
            </div>
            <div>
              <div>
                Change: 
                <button onclick="setDefault()">Default</button>
                <button onclick="setGrayscale()">Grayscale</button>
                <button onclick="setThresholding()">OTSU</button>
              </div>
            </div>
          </section>
        </div>

        <button class="btn btn-success w-100 mt-1" onclick="excelDownloadFn()">Excel Download</button>
      </div>
      <!-- area-output end -->

    </div>
    <!-- content end -->
  </div>
  <!-- container end -->

  <!-- bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  <!-- Cropper.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js" integrity="sha512-6lplKUSl86rUVprDIjiW8DuOniNX8UDoRATqZSds/7t6zCQZfaCe3e5zcGaQwxa8Kpn5RTM9Fvl3X2lLV4grPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- Tesseract.js -->
  <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>
  <!-- OpenCV.js -->
  <script async src="./js/opencv.js" type="text/javascript"></script>
  <!-- ExcelJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.3.0/exceljs.min.js" integrity="sha512-UnrKxsCMN9hFk7M56t4I4ckB4N/2HHi0w/7+B/1JsXIX3DmyBcsGpT3/BsuZMZf+6mAr0vP81syWtfynHJ69JA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- index.js -->
  <script src="./js/index.js"></script>
</body>

</html>